<div [formGroup]="fieldForm" class="form">
  <div class="form-group">
    <label>Does this item require braille?</label>
    <select class="form-control" formControlName="isBrailleRequired">
      <option [value]="true">Yes</option>
      <option [value]="false">No</option>
    </select>
  </div>
  <div class="form-group">
    <label>Has all braille content been provided?</label>
    <select class="form-control" formControlName="isBrailleProvided">
      <option [value]="true">Yes</option>
      <option [value]="false">No</option>
    </select>
  </div>

  <h3>Braille Content</h3>
  <div ng2FileDrop
       *ngIf="!uploader.isUploading && !isReadOnly"
       class="well my-drop-zone point"
       [class.nv-file-over]="hasDropZoneOver"
       [uploader]="uploader"
       (fileOver)="fileOverBase($event)"
       (click)="openFileDialog()">
    Click or drag and drop to attach braille file(s) here
  </div>
  <div *ngIf="uploader.isUploading"
       class="well my-drop-zone nv-file-over">
    Files are currently being uploaded
  </div>
  <div hidden>
    <input #fileDialog type="file" ng2FileSelect [uploader]="uploader" multiple  />
  </div>

  <div class="progress-height">
    <div *ngIf="uploader.isUploading" class="progress">
      <div class="progress-bar" role="progressbar" [ngStyle]="{ 'width': uploader.progress + '%' }"></div>
    </div>
  </div>

  <table *ngIf="brailleAttachments.length > 0" class="table">
    <thead>
      <tr>
        <th>Filename</th>
        <th>Uploaded</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let attachment of brailleAttachments; let i=index">
        <td>{{attachment.fileName}}</td>
        <td>{{attachment.uploadedDate | date:'short'}}</td>
        <td><a href="/api/ims/v1/items/{{item.id}}/braille/{{attachment.fileName}}">
          <i class="fa fa-download"></i></a></td>
        <td><a class="btn btn-default btn-xs" (click)="confirmDeleteFile(i, attachment.fileName)"><i class="fa fa-close"></i></a></td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="brailleAttachments.length === 0" class="alert alert-warning">
    <p><em>No files currently attached.</em></p>
  </div>
</div>

<div #deleteModal="bs-modal"
     id="brailleModal"
     class="modal fade"
     bsModal
     [config]="{backdrop: 'static'}"
     tabindex="-1"
     role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <!-- Header -->
      <div class="modal-header">
        <h3 class="modal-title">
          Delete File
        </h3>
      </div>
      <!-- Body -->
      <div class="modal-body">
        <p>
          Are you sure you want to delete {{deleteFileName}}?
        </p>
      </div>
      <div class="modal-footer">
        <button type="button"
                class="btn btn-primary btn-small"
                (click)="deleteFile(deleteIndex, deleteFileName)">Yes
        </button>
        <button type="button"
                class="btn btn-default btn-small"
                data-dismiss="modal"
                (click)="deleteModal.hide()">No
        </button>
      </div>
    </div>
  </div>
</div>
